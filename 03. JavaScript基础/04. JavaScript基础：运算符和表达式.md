# 1. 运算符和表达式

<!-- TOC -->

- [1. 运算符和表达式](#1-运算符和表达式)
  - [1.1. 算术运算符](#11-算术运算符)
    - [1.1.1. 算数运算符的注意事项](#111-算数运算符的注意事项)
  - [1.2. 赋值运算符](#12-赋值运算符)
  - [1.3. 一元运算符](#13-一元运算符)
    - [1.3.1. 前置型](#131-前置型)
    - [1.3.2. 后置型](#132-后置型)
    - [1.3.3. 递增和递减操作符遵循下列规则：](#133-递增和递减操作符遵循下列规则)
  - [1.4. 布尔运算符](#14-布尔运算符)
    - [1.4.1. 逻辑与](#141-逻辑与)
    - [1.4.2. 逻辑或](#142-逻辑或)
    - [1.4.3. 逻辑非](#143-逻辑非)
  - [1.5. 比较运算符](#15-比较运算符)
  - [1.6. 相等运算符](#16-相等运算符)
    - [1.6.1. 相等和不相等](#161-相等和不相等)
    - [1.6.2. 全等和不全等](#162-全等和不全等)
  - [1.7. 条件运算符](#17-条件运算符)
  - [1.8. 运算符的优先级](#18-运算符的优先级)

<!-- /TOC -->

## 1.1. 算术运算符

算术运算符： 加（+）、减（-）、乘（\*）、除（/）、取模（%）

### 1.1.1. 算数运算符的注意事项

1. 当对非 Number 类型的值进行运算（包括+、-、\*、/）时，会将这些值转换为 Number 然后在运算。
2. 任何值和 NaN 做运算都得 NaN。
3. 任何的值和字符串做加法运算，都会先转换为字符串，然后再做拼串操作。
   我们可以利用这一特点，来将一个任意的数据类型转换为 String：我们只需要为任意的数据类型 + 一个 "" 即可将其转换为 String。这是一种隐式的类型转换，由浏览器自动完成，实际上它也是调用 String()函数。
4. 任何值做-、\*、/运算时都会自动转换为 Number。
   我们可以利用这一特点，为一个值-0、\*1、/1 来将其转换为 Number。原理和 Number()函数一样，使用起来更加简单。

## 1.2. 赋值运算符

简单的赋值操作符由等于号（=）表示，其作用就是把右侧的值赋给左侧的变量。

每个主要算术操作符都有对应的复合赋值操作符。

乘/赋值（\*=）；

除/赋值（/=）；

模/赋值（%=）；

加/赋值（+=）；

减/赋值（-=）；

## 1.3. 一元运算符

只能操作一个值的操作符叫做一元操作符。一元操作符是 ECMAScript 中最简单的操作符。

### 1.3.1. 前置型

++a：先自增，后使用。

--a：后自减，先使用。

### 1.3.2. 后置型

a--：先使用，后自减。

a++：先使用，后自增。

### 1.3.3. 递增和递减操作符遵循下列规则：

- 在应用于一个包含有效数字字符的字符串时，先将其转换为数字值，再执行加减 1 的操作。字符串变量变成数值变量。
- 在应用于一个不包含有效数字字符的字符串时，将变量的值设为 NaN。字符串变量变成数值变量。
- 在应用于布尔值 false 时，先将其转化为 0 再执行加减 1 的操作。布尔值变量变成数值变量。
- 在应用于布尔值 true 时，先将其转化为 1 再执行加减 1 的操作。布尔值变量变成数值变量。
- 在应用于浮点数值时，执行加减 1 操作。
- 在应用于对象时，先调用对象的 valueof（）方法以取得一个可供操作的值。然后对该值应用前述规则。

## 1.4. 布尔运算符

### 1.4.1. 逻辑与

逻辑与操作符由两个和号（&&）表示，有两个操作数。
真值表如下所示：

| 第一个操作数 | 第二个操作数 | 结果  |
| ------------ | ------------ | ----- |
| true         | true         | true  |
| true         | false        | false |
| false        | true         | false |
| false        | false        | false |

逻辑与操作可以应用于任何类型的操作数，而不仅仅是布尔值。在有一个操作数不是布尔值的情况下，逻辑与操作就不一定返回布尔值。
此时，它遵循下列规则：

- 如果第一个操作数是对象，则返回第二个操作数；
- 如果第二个操作数是对象，则只有在第一操作数的求值结果为 true 的情况下才会返回该对象；
- 如果两个操作数都是对象，则返回第二个操作数；
- 如果第一个操作数为 null，则返回 null；
- 如果第一个操作数是 NaN，则返回 NaN；
- 如果第一个操作数是 undefined，则返回 undefined。

逻辑与操作属于短路操作，即如果第一个操作数能够决定结果，那么就不会再对第二个操作数求值。对于逻辑与而言，如果第一个操作数是 false，则无论第二个操作数是什么值，结果都不在可能是 true。

### 1.4.2. 逻辑或

逻辑或操作符由两个竖线符号（||）表示，有两个操作数。
逻辑或的真值表如下所示：
第一个操作数 |第二个操作数 |结果
---|---|---
true | true | true
true | false | true
false | true | true
false | false | false

与逻辑与操作相似，如果有一个操作数不是布尔值，逻辑或也不一定返回布尔值。此时，它遵循下列规则：

- 如果第一个操作数是对象，则返回第一个操作数；
- 如果第一个操作数的求值结果为 false，则返回第二个操作数；
- 如果两个操作数都是对象，则返回第一个操作数；
- 如果第一个操作数为 null，则返回 null；
- 如果第一个操作数是 NaN，则返回 NaN；
- 如果第一个操作数是 undefined，则返回 undefined。

逻辑或也是短路操作符。如果第一个操作数的求值结果为 true，就不会对第二个操作数求值了。

### 1.4.3. 逻辑非

逻辑非操作符由一个叹号（！）表示，可以应用于 ECMAScript 中的任何值。无论这个值是什么数据类型，这个操作符都会返回一个布尔值。逻辑非操作符首先会将它的操作数转换为一个布尔值，然后将对其求反。

逻辑非操作符遵循下列规则：

- 如果操作数是一个对象，返回 false；
- 如果操作数是一个空字符串，返回 true；
- 如果操作数是一个非空字符串，返回 false；
- 如果操作数是数值 0，返回 true；
- 如果操作数是任意非 0 数值，返回 false；
- 如果操作数是 null，返回 true；
- 如果操作数是 NaN，返回 true；
- 如果操作数是 undefined，返回 true。

逻辑非操作符也可以用于将一个值转换为与其对应的布尔值。而同时使用两个逻辑非操作符，实际上就会模拟 Boolean（）转型函数的行为。

## 1.5. 比较运算符

大于（>）小于（ <）大于等于（ >=）小于等于（ <=） 这几个操作符用于对两个值进行比较，比较运算符返回的结果是布尔值。

与 ECMAScript 中的其他操作符一样，当关系操作符的操作数使用了非数值时，也要进行数据转换或完成某些奇怪的操作。以下就是相应的规则：

- 如果两个操作数都是数值，则执行数值比较。
- 如果两个操作数都是字符串，则比较两个字符串对应的字符编码值（ASCII 码或者汉字 unicode 编码）。
- 如果一个操作数是数值，则将另外一个操作数转换为一个数值，然后执行数值比较。
- 如果一个操作数是对象，则调用这个对象的 valueof（）方法，用得到的结果按照前面的规则执行比较。如果对象没有 valueof（）方法，则调用 toString（）方法。
- 如果一个操作数是布尔值，则现将其转换为数值，然后再执行比较。
- 任何操作数与 NaN 进行关系比较，结果都是 false。

## 1.6. 相等运算符

### 1.6.1. 相等和不相等

ECMAScript 中的相等操作符由两个等于号（==）表示，如果两个操作数相等，则返回 true。

而不相等操作符由叹号后跟等于号（！=）表示，如果两个操作数不相等，则返回 false。

这两个操作符都会先强制转换，然后再比较它们的相等性。在转换不同的数据类型时，遵循下列基本规则：

- 如果有一个操作数是布尔值，则在比较相等性之前先将其转换为数值——false 转换为 0，true 转换为 1；
- 如果有一个操作数是字符串，另一个操作数是数值，在比较相等性之前先将字符串转换为数值；
- 如果一个操作数是对象，另一个操作数是不是，则调用对象 valueof（）方法，用得到的基本类型值按照前面的规则进行比较；
- null 和 undefined 是相等的；
- 如果有一个操作数是 NaN，则相等操作符返回 false，不相等操作符返回 true；
- 即使两个操作数都是 NaN，相等操作符也返回 false；

### 1.6.2. 全等和不全等

全等操作符由 3 个等于号（===）表示，它只在两个操作数未经转换就相等的情况下返回 true。

不全等操作符由一个叹号后跟两个等于号（！==）表示，它在两个操作数未经转换就不相等的情况下返回 true。

## 1.7. 条件运算符

**语法**：

```JavaScript
条件表达式？语句 1 : 语句 2
```

**执行的流程**：

条件运算符在执行时，首先对条件表达式进行求值：

- 如果该值为 true，则执行语句 1，并返回执行结果

- 如果该值为 false，则执行语句 2，并返回执行结果

如果条件的表达式的求值结果是一个非布尔值，会将其转换为布尔值然后在运算。

## 1.8. 运算符的优先级

优先级从高到底

1. () 优先级最高
2. 一元运算符 ++ -- !
3. 算数运算符 先\* / % 后 + -
4. 关系运算符 > >= < <=
5. 相等运算符 == != === !==
6. 逻辑运算符 先&& 后||
7. 条件运算符
8. 赋值运算符
