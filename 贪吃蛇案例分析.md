# 贪吃蛇案例分析

对象分析：地图、蛇、食物

## 食物对象

我们首先分析食物对象，食物对象有五个属性：

1. 食物的宽度：width
2. 食物的高度：height
3. 食物的背景颜色：bgc
4. 食物的水平坐标：x
5. 食物的垂直坐标：y

要想创建一个食物对象，我们首先想到的就是 var 一个 food 对象

```JavaScript
var food ={
  width:20,
  height:20,
  bgc:"yellow",
  x:0,
  y:0
}
```

但是这样所以属性数据都被写死了无法修改，而且只能创建这一个对象，所以我们应该使用构造函数来创建对象

```JavaScript
function Food(width, height, bgc, x, y){
  this.width = width || 20;//参数的默认值处理
  this.height = height || 20;
  this.bgc = bgc || "green";
  this.x = x || 0;
  this.y = y || 0;
}

var f = new Food(null, null, 0, "", 10);
```

但是这样传参方式也不好，它的实参和形参必须是一一对应，如果只想要修改其中一个参数的值，其他的值都需要占位。

```JavaScript
function Food(options){
// options： 形参
options = options || {}; // 给options设置默认值为空对象；目的是为了防止下面代码报错

this.width = options.width || 20;
this.height = options.height || 20;
this.bgc = options.bgc || "green";
this.x = options.x || 0;
this.y = options.y || 0;
}

var f = new Food();
```

这样一个食物对象就创建好了，接下来使用方法将食物渲染添加到地图上

1. 创建一个 div 元素来表示食物
2. 给 div 设置样式（来源于食物对象的属性）
3. 将 div 添加到地图上

```JavaScript
this.render = function(){
}
```

这种方法是给所有的实例对象都添加了方法，会造成内存浪费的问题，不推荐。
应该给原型添加 render 方法，这样就不会造成内存浪费，而且能让所有的实例对象都被访问到。

```JavaScript
Food.prototype.render = function(){

//1. 创建一div元素表示食物
var div = document.createElement("div");

//2. this的指向：谁调用了这个方法
div.style.width = this.width + "px";
div.style.height = this.height + "px";
div.style.backgroundColor = this.bgc;

this.x = parseInt(Math.random() * map.offsetWidth / this.width);
this.y = parseInt(Math.random() * map.offsetHeight / this.height);

div.style.position = "absolute";
div.style.left = this.x * this.width + "px";
div.style.top = this.y * this.height + "px";

map.appendChild(div);
}
```
