# 1. 编写可维护的 JavaScript（一）

<!-- TOC -->

- [1. 编写可维护的 JavaScript（一）](#1-编写可维护的-javascript一)
  - [1.1. 编程风格](#11-编程风格)
    - [1.1.1. 基本的格式化](#111-基本的格式化)
      - [1.1.1.1. 缩进层级](#1111-缩进层级)
      - [1.1.1.2. 语句结尾](#1112-语句结尾)
      - [1.1.1.3. 行的长度](#1113-行的长度)
      - [1.1.1.4. 换行](#1114-换行)
      - [1.1.1.5. 空行](#1115-空行)
      - [1.1.1.6. 命名](#1116-命名)
        - [1.1.1.6.1. 变量和函数](#11161-变量和函数)
        - [1.1.1.6.2. 常量](#11162-常量)
        - [1.1.1.6.3. 构造函数](#11163-构造函数)
      - [1.1.1.7. 直接量](#1117-直接量)
        - [1.1.1.7.1. 字符串](#11171-字符串)
        - [1.1.1.7.2. 数字](#11172-数字)
        - [1.1.1.7.3. null](#11173-null)
        - [1.1.1.7.4. undefined](#11174-undefined)
    - [1.1.2. 注释](#112-注释)
      - [1.1.2.1. 单行注释](#1121-单行注释)
      - [1.1.2.2. 多行注释](#1122-多行注释)
      - [1.1.2.3. 使用注释](#1123-使用注释)
      - [1.1.2.4. 文档注释](#1124-文档注释)
    - [1.1.3. 语句和表达式](#113-语句和表达式)
      - [1.1.3.1. 花括号的对齐方式](#1131-花括号的对齐方式)
      - [1.1.3.2. 块语句间隔](#1132-块语句间隔)
      - [1.1.3.3. switch 语句](#1133-switch-语句)
      - [1.1.3.4. with 语句](#1134-with-语句)
      - [1.1.3.5. for 循环](#1135-for-循环)
      - [1.1.3.6. for-in 循环](#1136-for-in-循环)
    - [1.1.4. 变量、函数和运算符](#114-变量函数和运算符)
      - [1.1.4.1. 变量声明](#1141-变量声明)
      - [1.1.4.2. 函数声明](#1142-函数声明)
      - [1.1.4.3. 函数调用间隔](#1143-函数调用间隔)
      - [1.1.4.4. 立即调用的函数](#1144-立即调用的函数)
      - [1.1.4.5. 严格模式](#1145-严格模式)
      - [1.1.4.6. 相等](#1146-相等)

<!-- /TOC -->

## 1.1. 编程风格

### 1.1.1. 基本的格式化

#### 1.1.1.1. 缩进层级

1. 使用 tab 进行缩进（通常一个 tab 相当于 4 个字符）
   缺点：不同系统对 tab 的解释不一致，影响代码展示的一致性。
2. 使用空格进行缩进（2 个、4 个、8 个）
   - 优点：在各个系统和编辑器中文件的展示格式不会有差异。
   - 缺点：使用一个没有配置好的文本编辑器创建格式化的代码的方式非常原始。

#### 1.1.1.2. 语句结尾

总是使用分号结尾。

#### 1.1.1.3. 行的长度

一行代码最长不应当超过 80 个字符。

#### 1.1.1.4. 换行

在运算符后换行，下一行增加两个层级的缩进。
if 条件语句断行在&&运算符之后。
当给变量赋值时，第二行的位置应当和赋值运算符的位置保持对齐。

#### 1.1.1.5. 空行

- 在每个控制流语句之前空行；
- 在方法之间；
- 在方法中的局部变量和第一条语句之间；
- 在多行或单行注释之前；
- 在方法内的逻辑片段之间插入空行，提高可读性。

#### 1.1.1.6. 命名

驼峰式大小写命名法：小写字母开始，后续的每个单词首字母都大写。

```JavaScript
var thisIsMyName;
var anotherVariable;
var aVeryLongVariableName;
```

##### 1.1.1.6.1. 变量和函数

变量名前缀应当是名词，函数名前缀应当是动词。
长度尽可能短，尽量体现出值的数据类型。

```JavaScript
// good
var count = 10;
var myName = 'Mangoyi';
var found = true;

// bad (变量看起来像是函数)
var getCount = 10;
var isFound = true;

 // good
function getName() {
    return myName;
}

// bad (函数看起来像是变量)
function theName() {
    return myName;
}
```

##### 1.1.1.6.2. 常量

使用大写字母和下划线来命名，下划线用以分隔单词。

```JavaScript
var MAX_COUNT = 10;
```

##### 1.1.1.6.3. 构造函数

构造函数以大写字母开头的驼峰式命名，常常是名词，因为构造函数是用来创建某个类型的实例的。

```JavaScript
// good
function Person(name) {
    this.name = name;
}

Person.prototype.sayName = function() {
    alert(this.name);
}

var me = new Person('cocytus');
```

#### 1.1.1.7. 直接量

##### 1.1.1.7.1. 字符串

在 Javascript 中，字符串是独一无二的，字符串可以使用双引号括起来，也可以用单引号括起来。

```JavaScript
// 合法javascript代码
var name = "cocytus says,\"Hi\"";

//也是合法的javascript代码
var name = 'cocytus says,"Hi"';
```

明确禁止创建多行字符串，多行字符串的一种替代方法是，使用字符串连接符(+)将字符串分成多份。

```JavaScript
// good
var longString = "Here's the story, of a man " +
                 "named cocytus";
```

##### 1.1.1.7.2. 数字

不要省略小数点之前或之后的数字。
禁止使用八进制写法。

##### 1.1.1.7.3. null

null 是一个特殊值。

- 用来初始化一个变量，这个变量可能赋值为一个对象。
- 用来和一个已经初始化的变量比较，这个变量可以是也可以不是一个对象。
- 当函数的参数期望是对象时，用作参数传入。
- 当函数的返回值期望是对象时，用作返回值传出。

```JavaScript
// good
var person = null;

function getPerson() {
    if (condition) {
        return new Person('cocytus');
    } else {
        return null;
    }
}

// good
var person = new getPerson();
if (person !== null) {
    doSomething();
}

// bad(不好的做法： 用来和为初始化的变量比较)
var person;
if (person != null) {
    doSomething();
}

// bad(不好的做法：检测是否传入了参数)
function doSomething(arg1, arg2) {
    if (arg2 != null) {
        doSomethingElse();
    }
}
```

理解 null 最好的方式是将它当做对象的占位符。

##### 1.1.1.7.4. undefined

undefined 是一个特殊值
那些没有被初始化的变量都有一个初始值，即 undefined，表示这个变量等待被赋值。

### 1.1.2. 注释

#### 1.1.2.1. 单行注释

单行注释以两个斜线开始，以行尾结束。

#### 1.1.2.2. 多行注释

多行注释可以包裹跨行文本，以`/*`开始，以`*/`结束。

#### 1.1.2.3. 使用注释

添加注释的一般原则是，在需要让代码变得更清晰时添加注释。

#### 1.1.2.4. 文档注释

文档注释以单斜线加双星号`/**`开始，接下来是描述信息，其中使用@符号来表示一个或多个属性。

### 1.1.3. 语句和表达式

所有块语句都应当使用花括号，包括：if、for、while、do…while…、try…catch…finally

#### 1.1.3.1. 花括号的对齐方式

1. 将左花括号放置在块语句中第一句代码的末尾；

```JavaScript
if (condition) {
 doSomething();
} else {
 doSomethingElse();
}
```

2. 将左花括号放置于块语句首行的下一行。（不推荐）

```JavaScript
if (condition)
{
    doSomething();
} else
{
    doSomethingElse();
}
```

#### 1.1.3.2. 块语句间隔

1. 在语句名、圆括号和左花括号之间没有空格间隔。
2. 在左圆括号之前和右圆括号之后各添加一个空格。
3. 在左圆括号后和右圆括号前各添加一个空格。

```JavaScript
    // 1
    if(condition){
        doSomething();
    }

    // 2
    if (condition) {
        doSomething();
    }

    // 3
    if ( condition ) {
        doSomething()
    }
```

#### 1.1.3.3. switch 语句

```JavaScript
switch(condition) {
    case "first":
        // 代码
        break;
    case "second":
        // 代码
        break;

    default:
        // 代码(当没有默认行为的时候，可以省去default语法结构)
}
```

#### 1.1.3.4. with 语句

with 语句可以更改包含的上下文解析变量的方式。

#### 1.1.3.5. for 循环

#### 1.1.3.6. for-in 循环

### 1.1.4. 变量、函数和运算符

#### 1.1.4.1. 变量声明

#### 1.1.4.2. 函数声明

#### 1.1.4.3. 函数调用间隔

#### 1.1.4.4. 立即调用的函数

#### 1.1.4.5. 严格模式

#### 1.1.4.6. 相等
